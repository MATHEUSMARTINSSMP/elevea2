{"version":3,"file":"Dashboard-B_MgxnhE.js","sources":["../../src/pages/admin/Dashboard.tsx"],"sourcesContent":["// src/admin/AdminDashboard.tsx\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { DashboardCardSkeleton, TableRowSkeleton } from \"@/components/ui/loading-skeletons\";\n\n/** Endpoints (Netlify Functions do PAINEL Elevea) */\nconst APPS_ENDPOINT = \"/.netlify/functions/sheets-proxy\";\nconst ADMIN_TOGGLE_FN = \"/.netlify/functions/admin-toggle\";\nconst CLIENT_API = \"/.netlify/functions/client-api\"; // Para relatórios\n\n/** ===== Tipos ===== */\ntype SiteStatus = {\n  ok: boolean;\n  active: boolean;\n  manualBlock?: boolean;\n  status?: string; // approved/authorized/... (billing)\n  preapproval_id?: string;\n  email?: string;\n  updatedAt?: string | number;\n};\n\ntype Row = { siteSlug: string; status: SiteStatus | null };\ntype Filter = \"all\" | \"active\" | \"blocked\" | \"inactive\";\n\ntype Billing = {\n  ok: boolean;\n  plan?: \"vip\" | \"essential\";\n  status?: string;\n  provider?: string;\n  next_renewal?: string;\n  amount?: number;\n  currency?: string;\n  error?: string;\n};\n\ntype Lead = { ts: string; name: string; email: string; phone: string; source: string };\ntype Feedback = { ts: string; name: string; rating: number; comment: string };\ntype TrafficPoint = { day: string; hits: number };\n\n/** ===== Helpers visuais ===== */\nfunction cls(...xs: (string | false | null | undefined)[]) {\n  return xs.filter(Boolean).join(\" \");\n}\nfunction Badge({\n  children,\n  tone = \"neutral\",\n}: {\n  children: React.ReactNode;\n  tone?: \"neutral\" | \"green\" | \"red\" | \"amber\";\n}) {\n  const map: Record<string, string> = {\n    neutral: \"bg-gray-100 text-gray-700 border border-gray-200\",\n    green: \"bg-emerald-100 text-emerald-700 border border-emerald-200\",\n    red: \"bg-rose-100 text-rose-700 border border-rose-200\",\n    amber: \"bg-amber-100 text-amber-800 border border-amber-200\",\n  };\n  return (\n    <span className={cls(\"px-2.5 py-1 rounded-full text-xs font-medium inline-flex items-center gap-1\", map[tone])}>\n      <span className=\"h-1.5 w-1.5 rounded-full bg-current opacity-80\" />\n      {children}\n    </span>\n  );\n}\nfunction Button(\n  props: React.ButtonHTMLAttributes<HTMLButtonElement> & { variant?: \"solid\" | \"outline\" | \"ghost\" }\n) {\n  const { className, variant = \"solid\", ...rest } = props;\n  const base =\n    \"inline-flex items-center justify-center rounded-xl text-sm px-3.5 py-2.5 transition shadow-sm disabled:opacity-60 disabled:cursor-not-allowed\";\n  const variants = {\n    solid: \"bg-black text-white hover:bg-gray-900\",\n    outline: \"border border-gray-300 bg-white hover:bg-gray-50\",\n    ghost: \"hover:bg-gray-100 text-gray-800\",\n  } as const;\n  return <button className={cls(base, variants[variant], className)} {...rest} />;\n}\nfunction Icon({\n  name,\n  className = \"\",\n}: {\n  name: \"refresh\" | \"lock\" | \"unlock\" | \"download\" | \"search\";\n  className?: string;\n}) {\n  const m: Record<string, string> = {\n    refresh: \"M4 4v4m0-4h4M4 8l4-4m8 12v-4m0 4h-4m4-4-4 4M4 16h4m8-8h4\",\n    lock: \"M6 10V8a4 4 0 1 1 8 0v2m-9 0h10v6a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-6z\",\n    unlock: \"M15 10V8a4 4 0 0 0-8 0m-1 2h10v6a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-6z\",\n    download: \"M12 3v10m0 0 3-3m-3 3-3-3M5 17h14\",\n    search: \"M10 18a8 8 0 1 1 0-16 8 8 0 0 1 0 16zm11 3-6-6\",\n  };\n  return (\n    <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.8\" className={cls(\"h-4 w-4\", className)}>\n      <path d={m[name]} strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n    </svg>\n  );\n}\nfunction fmtDate(s?: string | number) {\n  if (!s) return \"—\";\n  try {\n    return new Date(s).toLocaleString(\"pt-BR\");\n  } catch {\n    return String(s);\n  }\n}\n\n/** ====== CSV util ====== */\nfunction downloadCSV(filename: string, rows: any[]) {\n  if (!rows || !rows.length) return;\n  const header = Object.keys(rows[0]);\n  const lines = [header.join(\",\"), ...rows.map((r) => header.map((h) => JSON.stringify(r[h] ?? \"\")).join(\",\"))].join(\n    \"\\n\"\n  );\n  const blob = new Blob([lines], { type: \"text/csv;charset=utf-8;\" });\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement(\"a\");\n  a.href = url;\n  a.download = filename;\n  a.click();\n  URL.revokeObjectURL(url);\n}\n\n/** Pequeno debounce (para busca) */\nfunction useDebounced<T>(value: T, delay = 250) {\n  const [v, setV] = useState(value);\n  useEffect(() => {\n    const t = setTimeout(() => setV(value), delay);\n    return () => clearTimeout(t);\n  }, [value, delay]);\n  return v;\n}\n\n/** ====== Page ====== */\nexport default function AdminDashboard() {\n  const [loading, setLoading] = useState(false);\n  const [rows, setRows] = useState<Row[]>([]);\n  const [query, setQuery] = useState(\"\");\n  const debouncedQuery = useDebounced(query, 250);\n  const [filter, setFilter] = useState<Filter>(\"all\");\n  const [error, setError] = useState<string>(\"\");\n\n  // side drawers por site\n  const [openSlug, setOpenSlug] = useState<string>(\"\"); // qual linha está \"expandida\"\n  const [billing, setBilling] = useState<Record<string, Billing | null>>({});\n  const [leads, setLeads] = useState<Record<string, Lead[]>>({});\n  const [feedbacks, setFeedbacks] = useState<Record<string, Feedback[]>>({});\n  const [traffic, setTraffic] = useState<Record<string, TrafficPoint[]>>({});\n  const [busy, setBusy] = useState<string>(\"\"); // slug \"busy\"\n  const [toast, setToast] = useState<{ type: \"ok\" | \"err\"; msg: string } | null>(null);\n\n  function showToast(t: \"ok\" | \"err\", msg: string) {\n    setToast({ type: t, msg });\n    setTimeout(() => setToast(null), 3200);\n  }\n\n  async function reload() {\n    setLoading(true);\n    setError(\"\");\n    try {\n      // Buscar lista de sites\n      const r = await fetch(`/.netlify/functions/admin-sites?nc=${Date.now()}`, { cache: \"no-store\" });\n      if (!r.ok) throw new Error(`Falha ao listar sites (HTTP ${r.status})`);\n      const data = await r.json();\n      const slugs: string[] = (data?.siteSlugs || []).filter(Boolean);\n\n      const statusList: Row[] = await Promise.all(\n        slugs.map(async (slug) => {\n          try {\n            const s = await fetch(`${APPS_ENDPOINT}?type=status&site=${encodeURIComponent(slug)}&nc=${Date.now()}`, {\n              cache: \"no-store\",\n            });\n            if (!s.ok) throw new Error(`Falha status ${slug} (HTTP ${s.status})`);\n            const sj: SiteStatus = await s.json();\n            return { siteSlug: slug, status: sj };\n          } catch (e) {\n            console.error(e);\n            return { siteSlug: slug, status: null };\n          }\n        })\n      );\n\n      setRows(statusList);\n    } catch (e: any) {\n      setError(e?.message || \"Erro ao carregar dados.\");\n      setRows([]);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  useEffect(() => {\n    reload();\n  }, []);\n\n  const filtered = useMemo(() => {\n    const q = debouncedQuery.trim().toUpperCase();\n    return rows.filter((r) => {\n      const st = r.status;\n      const matchesQuery =\n        !q ||\n        r.siteSlug.toUpperCase().includes(q) ||\n        (st?.email || \"\").toUpperCase().includes(q) ||\n        (st?.preapproval_id || \"\").toUpperCase().includes(q);\n\n      let matchesFilter = true;\n      if (filter === \"active\") matchesFilter = !!(st?.ok && st?.active && !st?.manualBlock);\n      if (filter === \"blocked\") matchesFilter = !!st?.manualBlock;\n      if (filter === \"inactive\") matchesFilter = !!(st?.ok && !st?.active);\n\n      return matchesQuery && matchesFilter;\n    });\n  }, [rows, debouncedQuery, filter]);\n\n  const kpis = useMemo(() => {\n    const total = rows.length;\n    const active = rows.filter((r) => r.status?.ok && r.status?.active && !r.status?.manualBlock).length;\n    const blocked = rows.filter((r) => r.status?.manualBlock).length;\n    const inactive = rows.filter((r) => r.status?.ok && !r.status?.active).length;\n    return { total, active, blocked, inactive };\n  }, [rows]);\n\n  async function toggleBlock(slug: string, next: boolean) {\n    try {\n      setBusy(slug);\n      const rr = await fetch(ADMIN_TOGGLE_FN, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-elevea-internal\": \"1\",\n        },\n        body: JSON.stringify({ action: \"manual-block\", siteSlug: slug, block: !!next }),\n      });\n      if (!rr.ok) {\n        const text = await rr.text().catch(() => \"\");\n        throw new Error(`HTTP ${rr.status} - ${text || \"admin-toggle falhou\"}`);\n      }\n      showToast(\"ok\", next ? \"Site bloqueado\" : \"Site reativado\");\n      await reload();\n    } catch (e: any) {\n      console.error(e);\n      showToast(\"err\", e?.message || \"Falha ao alternar bloqueio.\");\n      alert(e?.message || \"Falha ao alternar bloqueio.\");\n    } finally {\n      setBusy(\"\");\n    }\n  }\n\n  async function loadDrill(slug: string, email?: string) {\n    setOpenSlug((s) => (s === slug ? \"\" : slug));\n    if (openSlug && openSlug === slug) return; // fechando\n\n    try {\n      // Billing - usar client-billing function\n      if (email) {\n        const br = await fetch(`/.netlify/functions/client-billing?email=${encodeURIComponent(email)}`, {\n          cache: \"no-store\",\n        });\n        const bj: Billing = await br.json();\n        setBilling((prev) => ({ ...prev, [slug]: bj }));\n      }\n      \n      // Leads - usar client-api\n      {\n        const lr = await fetch(\n          `/.netlify/functions/client-api?action=list_leads&site=${encodeURIComponent(slug)}&page=1&size=100&nc=${Date.now()}`,\n          { cache: \"no-store\" }\n        );\n        const lj = await lr.json();\n        setLeads((prev) => ({ ...prev, [slug]: (lj?.items || []) as Lead[] }));\n      }\n      \n      // Feedbacks - usar client-api\n      {\n        const fr = await fetch(\n          `/.netlify/functions/client-api?action=list_feedbacks&site=${encodeURIComponent(slug)}&page=1&size=100&nc=${Date.now()}`,\n          { cache: \"no-store\" }\n        );\n        const fj = await fr.json();\n        setFeedbacks((prev) => ({ ...prev, [slug]: (fj?.items || []) as Feedback[] }));\n      }\n      \n      // Traffic - usar client-api\n      {\n        const tr = await fetch(\n          `/.netlify/functions/client-api?action=get_traffic&site=${encodeURIComponent(slug)}&range=30d&nc=${Date.now()}`,\n          { cache: \"no-store\" }\n        );\n        const tj = await tr.json();\n        setTraffic((prev) => ({ ...prev, [slug]: (tj?.daily || []) as TrafficPoint[] }));\n      }\n    } catch (e) {\n      console.error(e);\n      showToast(\"err\", \"Alguns relatórios não puderam ser carregados.\");\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/60 py-10 px-5 md:px-8\">\n      <div className=\"mx-auto max-w-7xl space-y-8\">\n        {/* Header */}\n        <div className=\"flex flex-col gap-4 md:flex-row md:items-center md:justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-semibold tracking-tight\">Painel Elevea · Assinaturas</h1>\n            <p className=\"text-slate-600 mt-1\">Status, bloqueios e relatórios (financeiro, leads, feedbacks, tráfego).</p>\n          </div>\n          <div className=\"flex gap-2\">\n            <Button variant=\"outline\" onClick={reload} disabled={loading}>\n              <Icon name=\"refresh\" className={cls(loading && \"animate-spin\")} />{\" \"}\n              <span className=\"ml-2\">{loading ? \"Atualizando\" : \"Atualizar\"}</span>\n            </Button>\n          </div>\n        </div>\n\n        {!!error && (\n          <div className=\"rounded-xl border bg-white p-3 text-sm text-rose-700\">\n            <div className=\"font-medium\">Erro</div>\n            <div className=\"opacity-80\">{error}</div>\n          </div>\n        )}\n\n        {/* KPIs */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          <KpiCard title=\"Total\" value={kpis.total} />\n          <KpiCard title=\"Ativos\" value={kpis.active} />\n          <KpiCard title=\"Bloqueados\" value={kpis.blocked} />\n          <KpiCard title=\"Inativos\" value={kpis.inactive} />\n        </div>\n\n        {/* Filtros + busca */}\n        <div className=\"flex flex-col md:flex-row items-stretch md:items-center gap-3\">\n          <div className=\"relative w-full md:w-[28rem]\">\n            <Icon name=\"search\" className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500\" />\n            <input\n              className=\"w-full border rounded-xl pl-9 pr-3 py-2.5 bg-white focus:outline-none focus:ring-2 focus:ring-black/70\"\n              placeholder=\"Buscar por site, e-mail ou preapproval_id...\"\n              value={query}\n              onChange={(e) => setQuery(e.target.value)}\n            />\n          </div>\n          <div className=\"flex gap-2\">\n            {([\"all\", \"active\", \"blocked\", \"inactive\"] as Filter[]).map((f) => (\n              <Button key={f} variant={filter === f ? \"solid\" : \"outline\"} onClick={() => setFilter(f)}>\n                {f}\n              </Button>\n            ))}\n          </div>\n        </div>\n\n        {/* Tabela */}\n        <div className=\"overflow-x-auto rounded-2xl border bg-white shadow-sm\">\n          <table className=\"min-w-full text-sm\">\n            <thead className=\"bg-slate-50 text-slate-600 sticky top-0\">\n              <tr>\n                <Th>Site</Th>\n                <Th>Status</Th>\n                <Th>Pagamento</Th>\n                <Th>E-mail</Th>\n                <Th>Preapproval</Th>\n                <Th>Atualizado</Th>\n                <Th className=\"text-center\">Bloq. manual</Th>\n                <Th className=\"text-right\">Ações</Th>\n              </tr>\n            </thead>\n            <tbody>\n              {filtered.map((r) => {\n                const st = r.status;\n                const tone = !st?.ok ? \"amber\" : st?.manualBlock ? \"red\" : st?.active ? \"green\" : \"neutral\";\n                const label = !st?.ok ? \"erro\" : st?.manualBlock ? \"bloqueado\" : st?.active ? \"ativo\" : \"inativo\";\n\n                return (\n                  <React.Fragment key={r.siteSlug}>\n                    <tr className=\"border-t hover:bg-slate-50/70\">\n                      <Td className=\"font-medium\">{r.siteSlug}</Td>\n                      <Td>\n                        <Badge tone={tone as any}>{label}</Badge>\n                      </Td>\n                      <Td>{st?.status || \"—\"}</Td>\n                      <Td className=\"max-w-[16rem] truncate\">{st?.email || \"—\"}</Td>\n                      <Td className=\"max-w-[12rem] truncate\">{st?.preapproval_id || \"—\"}</Td>\n                      <Td>{fmtDate(st?.updatedAt)}</Td>\n                      <Td className=\"text-center\">\n                        <input\n                          type=\"checkbox\"\n                          className=\"h-4 w-4 accent-black\"\n                          checked={!!st?.manualBlock}\n                          onChange={(e) => toggleBlock(r.siteSlug, e.target.checked)}\n                          disabled={busy === r.siteSlug}\n                          aria-label={`Bloqueio manual de ${r.siteSlug}`}\n                        />\n                      </Td>\n                      <Td className=\"text-right space-x-2 whitespace-nowrap\">\n                        <Button variant=\"outline\" onClick={() => loadDrill(r.siteSlug, st?.email)}>\n                          Relatórios\n                        </Button>\n                        <Button\n                          onClick={() => toggleBlock(r.siteSlug, !st?.manualBlock)}\n                          disabled={busy === r.siteSlug}\n                          className={cls(\n                            st?.manualBlock ? \"bg-emerald-600 hover:bg-emerald-700\" : \"bg-black hover:bg-gray-900\",\n                            \"text-white\"\n                          )}\n                        >\n                          {st?.manualBlock ? (\n                            <span className=\"inline-flex items-center gap-2\">\n                              <Icon name=\"unlock\" /> Reativar\n                            </span>\n                          ) : (\n                            <span className=\"inline-flex items-center gap-2\">\n                              <Icon name=\"lock\" /> Bloquear\n                            </span>\n                          )}\n                        </Button>\n                      </Td>\n                    </tr>\n\n                    {/* Drawer da linha */}\n                    {openSlug === r.siteSlug && (\n                      <tr className=\"bg-slate-50/60\">\n                        <td colSpan={8} className=\"px-4 py-6\">\n                          <RowDetails\n                            slug={r.siteSlug}\n                            email={st?.email}\n                            billing={billing[r.siteSlug] ?? null}\n                            leads={leads[r.siteSlug] ?? []}\n                            feedbacks={feedbacks[r.siteSlug] ?? []}\n                            traffic={traffic[r.siteSlug] ?? []}\n                          />\n                        </td>\n                      </tr>\n                    )}\n                  </React.Fragment>\n                );\n              })}\n              {filtered.length === 0 && (\n                <tr>\n                  <td className=\"px-4 py-6 text-center text-slate-500\" colSpan={8}>\n                    {loading ? (\n                      <div className=\"p-4\">\n                        <TableRowSkeleton columns={8} />\n                        <TableRowSkeleton columns={8} />\n                        <TableRowSkeleton columns={8} />\n                      </div>\n                    ) : (\n                      \"Nenhum resultado.\"\n                    )}\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Toast */}\n      {toast && (\n        <div\n          className={cls(\n            \"fixed bottom-4 right-4 rounded-xl px-4 py-3 shadow-lg\",\n            toast.type === \"ok\" ? \"bg-emerald-600 text-white\" : \"bg-rose-600 text-white\"\n          )}\n        >\n          {toast.msg}\n        </div>\n      )}\n    </div>\n  );\n}\n\n/** ====== Sub-componentes ====== */\nfunction KpiCard({ title, value }: { title: string; value: React.ReactNode }) {\n  return (\n    <div className=\"rounded-2xl bg-white shadow-sm p-5 border\">\n      <div className=\"text-sm text-slate-500\">{title}</div>\n      <div className=\"mt-1 text-3xl font-semibold\">{value}</div>\n    </div>\n  );\n}\nfunction Th({ children, className = \"\" }: any) {\n  return <th className={cls(\"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide\", className)}>{children}</th>;\n}\nfunction Td({ children, className = \"\" }: any) {\n  return <td className={cls(\"px-4 py-3 align-top\", className)}>{children}</td>;\n}\n\nfunction RowDetails({\n  slug,\n  email,\n  billing,\n  leads,\n  feedbacks,\n  traffic,\n}: {\n  slug: string;\n  email?: string;\n  billing: Billing | null;\n  leads: Lead[];\n  feedbacks: Feedback[];\n  traffic: TrafficPoint[];\n}) {\n  return (\n    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n      {/* Financeiro */}\n      <section className=\"rounded-xl border bg-white p-4\">\n        <div className=\"flex items-center justify-between\">\n          <h3 className=\"font-semibold\">Financeiro</h3>\n          <button onClick={() => billing && downloadCSV(`${slug}-billing.csv`, [billing])} className=\"text-xs underline\" disabled={!billing}>\n            <span className=\"inline-flex items-center gap-1\">\n              <Icon name=\"download\" /> CSV\n            </span>\n          </button>\n        </div>\n        {!billing ? (\n          <div className=\"mt-3 space-y-2\">\n            <div className=\"h-3 bg-gray-200 rounded animate-pulse\"></div>\n            <div className=\"h-3 bg-gray-200 rounded animate-pulse w-3/4\"></div>\n            <div className=\"h-3 bg-gray-200 rounded animate-pulse w-1/2\"></div>\n          </div>\n        ) : billing.ok ? (\n          <ul className=\"mt-3 space-y-1 text-sm\">\n            <li>\n              <b>Plano:</b> {billing.plan}\n            </li>\n            <li>\n              <b>Status:</b> {billing.status}\n            </li>\n            <li>\n              <b>Próx. renovação:</b> {fmtDate(billing.next_renewal)}\n            </li>\n            <li>\n              <b>Valor:</b> {billing.amount} {billing.currency}\n            </li>\n            <li>\n              <b>Provedor:</b> {billing.provider}\n            </li>\n          </ul>\n        ) : (\n          <div className=\"text-sm text-rose-700 mt-2\">Erro ao carregar: {billing.error || \"desconhecido\"}</div>\n        )}\n        {!!email && <div className=\"text-xs text-slate-500 mt-3\">E-mail: {email}</div>}\n      </section>\n\n      {/* Leads */}\n      <section className=\"rounded-xl border bg-white p-4\">\n        <div className=\"flex items-center justify-between\">\n          <h3 className=\"font-semibold\">Leads (últimos)</h3>\n        </div>\n        <div className=\"mt-2 space-y-2 max-h-60 overflow-auto pr-1\">\n          {(!leads || leads.length === 0) && <div className=\"text-sm text-slate-500\">Sem leads.</div>}\n          {leads?.slice(0, 8).map((l, i) => (\n            <div key={i} className=\"text-sm\">\n              <div className=\"font-medium\">\n                {l.name || \"(sem nome)\"} <span className=\"text-slate-500\">· {l.source || \"-\"}</span>\n              </div>\n              <div className=\"text-slate-600\">\n                {l.email || \"-\"} · {l.phone || \"-\"}\n              </div>\n              <div className=\"text-xs text-slate-500\">{fmtDate(l.ts)}</div>\n            </div>\n          ))}\n        </div>\n      </section>\n      \n      {/* Configuração de Sessões (schema por site) */}\n      <section className=\"rounded-xl border bg-white p-4\">\n        <h3 className=\"font-semibold\">Configuração de Sessões (schema)</h3>\n        <SchemaEditor slug={slug} />\n      </section>\n\n      {/* Controle de Funcionalidades VIP */}\n      <section className=\"rounded-xl border bg-white p-4\">\n        <h3 className=\"font-semibold\">Controle de Funcionalidades</h3>\n        <FeatureControl slug={slug} />\n      </section>\n\n      {/* Feedbacks + Tráfego */}\n      <section className=\"rounded-xl border bg-white p-4\">\n        <div className=\"flex items-center justify-between\">\n          <h3 className=\"font-semibold\">Feedbacks</h3>\n        </div>\n        <div className=\"mt-2 space-y-2 max-h-40 overflow-auto pr-1\">\n          {(!feedbacks || feedbacks.length === 0) && <div className=\"text-sm text-slate-500\">Sem feedbacks.</div>}\n          {feedbacks?.slice(0, 6).map((f, i) => (\n            <div key={i} className=\"text-sm\">\n              <div className=\"font-medium\">\n                {f.name || \"(anônimo)\"} · ⭐ {f.rating}\n              </div>\n              <div className=\"text-slate-700\">{f.comment || \"-\"}</div>\n              <div className=\"text-xs text-slate-500\">{fmtDate(f.ts)}</div>\n            </div>\n          ))}\n        </div>\n\n        <div className=\"mt-4\">\n          <h4 className=\"font-semibold mb-1\">Tráfego (30d)</h4>\n          <TrafficBars points={traffic} />\n        </div>\n      </section>\n    </div>\n  );\n}\n\nfunction TrafficBars({ points }: { points: TrafficPoint[] }) {\n  if (!points?.length) return <div className=\"text-sm text-slate-500\">Sem dados.</div>;\n  const max = Math.max(...points.map((p) => p.hits), 1);\n  return (\n    <div className=\"flex items-end gap-1 h-28\">\n      {points.slice(-20).map((p) => (\n        <div key={p.day} className=\"flex-1 bg-slate-200 rounded-sm\" title={`${p.day}: ${p.hits}`}>\n          <div className=\"bg-black w-full rounded-sm\" style={{ height: `${Math.max(6, (p.hits / max) * 100)}%` }} />\n        </div>\n      ))}\n    </div>\n  );\n}\n\nfunction FeatureControl({ slug }: { slug: string }) {\n  const [features, setFeatures] = useState<any>(null);\n  const [loading, setLoading] = useState(false);\n\n  const loadFeatures = async () => {\n    setLoading(true);\n    try {\n      const response = await fetch('/.netlify/functions/admin-feature-control', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-elevea-internal': process.env.ADMIN_DASH_TOKEN || process.env.ADMIN_TOKEN || ''\n        },\n        body: JSON.stringify({\n          action: 'get_client_features',\n          siteSlug: slug\n        })\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        setFeatures(data);\n      }\n    } catch (error) {\n      console.error('Erro ao carregar features:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const toggleFeature = async (featureId: string, enabled: boolean) => {\n    try {\n      const response = await fetch('/.netlify/functions/admin-feature-control', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-elevea-internal': process.env.ADMIN_DASH_TOKEN || process.env.ADMIN_TOKEN || ''\n        },\n        body: JSON.stringify({\n          action: 'toggle_feature',\n          siteSlug: slug,\n          featureId: featureId,\n          enabled: enabled\n        })\n      });\n\n      if (response.ok) {\n        loadFeatures(); // Recarregar features\n      }\n    } catch (error) {\n      console.error('Erro ao alterar feature:', error);\n    }\n  };\n\n  const updatePlan = async (plan: 'essential' | 'vip') => {\n    try {\n      const response = await fetch('/.netlify/functions/admin-feature-control', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-elevea-internal': process.env.ADMIN_DASH_TOKEN || process.env.ADMIN_TOKEN || ''\n        },\n        body: JSON.stringify({\n          action: 'update_plan',\n          siteSlug: slug,\n          plan: plan\n        })\n      });\n\n      if (response.ok) {\n        loadFeatures(); // Recarregar features\n      }\n    } catch (error) {\n      console.error('Erro ao alterar plano:', error);\n    }\n  };\n\n  useEffect(() => {\n    loadFeatures();\n  }, [slug]);\n\n  if (loading || !features) {\n    return <div className=\"text-sm text-slate-500\">Carregando funcionalidades...</div>;\n  }\n\n  const { settings, availableFeatures } = features;\n  const vipFeatures = availableFeatures.filter((f: any) => f.plan === 'vip' && !f.isCore);\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Controle de Plano */}\n      <div className=\"flex items-center gap-4\">\n        <span className=\"text-sm font-medium\">Plano atual:</span>\n        <select\n          value={settings.plan}\n          onChange={(e) => updatePlan(e.target.value as 'essential' | 'vip')}\n          className=\"border rounded px-2 py-1 text-sm\"\n        >\n          <option value=\"essential\">Essential</option>\n          <option value=\"vip\">VIP</option>\n        </select>\n      </div>\n\n      {/* Lista de Funcionalidades VIP */}\n      <div className=\"space-y-2\">\n        <h4 className=\"text-sm font-medium\">Funcionalidades VIP:</h4>\n        <div className=\"space-y-1\">\n          {vipFeatures.map((feature: any) => {\n            const isEnabled = settings.enabledFeatures.includes(feature.id);\n            return (\n              <div key={feature.id} className=\"flex items-center justify-between py-1\">\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-sm\">{feature.icon}</span>\n                  <span className=\"text-sm\">{feature.name}</span>\n                </div>\n                <label className=\"flex items-center gap-2\">\n                  <input\n                    type=\"checkbox\"\n                    checked={isEnabled}\n                    onChange={(e) => toggleFeature(feature.id, e.target.checked)}\n                    className=\"h-4 w-4\"\n                    disabled={settings.plan !== 'vip'}\n                  />\n                  <span className=\"text-xs text-slate-500\">\n                    {isEnabled ? 'Ativo' : 'Inativo'}\n                  </span>\n                </label>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n\n      {settings.plan !== 'vip' && (\n        <div className=\"text-xs text-amber-600 bg-amber-50 p-2 rounded\">\n          ⚠️ Cliente precisa do plano VIP para acessar funcionalidades avançadas\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction SchemaEditor({ slug }: { slug: string }) {\n  const [loading, setLoading] = useState(true);\n  const [jsonText, setJsonText] = useState<string>(\"\");\n\n  async function load() {\n    setLoading(true);\n    try {\n      const r = await fetch(`/.netlify/functions/client-api?action=get_settings&site=${encodeURIComponent(slug)}&nc=${Date.now()}`, {\n        cache: \"no-store\",\n      });\n      const j = await r.json();\n      const defs = j?.settings?.sections?.defs || [];\n      setJsonText(JSON.stringify(defs, null, 2));\n    } catch {\n      setJsonText(\"[]\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  useEffect(() => {\n    load();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [slug]);\n\n  async function save() {\n    try {\n      const parsed = JSON.parse(jsonText || \"[]\");\n      const rr = await fetch(\"/.netlify/functions/client-api\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          action: \"save_settings\",\n          site: slug,\n          settings: { sections: { defs: parsed } }, // mantemos data existente como está\n        }),\n      });\n      if (!rr.ok) throw new Error(`HTTP ${rr.status}`);\n      alert(\"Schema salvo com sucesso.\");\n    } catch (e: any) {\n      alert(e?.message || \"Falha ao salvar schema.\");\n    }\n  }\n\n  return (\n    <div className=\"mt-2\">\n      {loading ? (\n        <div className=\"text-sm text-slate-500\">Carregando…</div>\n      ) : (\n        <>\n          <div className=\"text-xs text-slate-600 mb-2\">\n            Edite o <b>array</b> de sessões. Exemplo rápido:\n            <pre className=\"mt-2 bg-slate-50 border rounded p-2 overflow-auto\">\n{`[\n  {\n    \"id\": \"hero\",\n    \"name\": \"Sessão: Hero\",\n    \"fields\": [\n      { \"key\": \"title\", \"label\": \"Título\" },\n      { \"key\": \"subtitle\", \"label\": \"Subtítulo\" }\n    ],\n    \"slots\": [\n      { \"key\": \"hero_img_1\", \"label\": \"Foto 1\" },\n      { \"key\": \"hero_img_2\", \"label\": \"Foto 2\" }\n    ]\n  }\n]`}\n            </pre>\n          </div>\n          <textarea\n            className=\"w-full h-56 border rounded p-2 font-mono text-xs\"\n            value={jsonText}\n            onChange={(e) => setJsonText(e.target.value)}\n          />\n          <div className=\"mt-2 flex gap-2\">\n            <button onClick={load} className=\"border rounded px-3 py-1.5 text-sm\">Recarregar</button>\n            <button onClick={save} className=\"bg-black text-white rounded px-3 py-1.5 text-sm\">Salvar schema</button>\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n"],"names":["APPS_ENDPOINT","ADMIN_TOGGLE_FN","cls","xs","Badge","children","tone","map","jsxs","jsx","Button","props","className","variant","rest","base","variants","Icon","name","m","fmtDate","s","downloadCSV","filename","rows","header","lines","r","h","blob","url","a","useDebounced","value","delay","v","setV","useState","useEffect","t","AdminDashboard","loading","setLoading","setRows","query","setQuery","debouncedQuery","filter","setFilter","error","setError","openSlug","setOpenSlug","billing","setBilling","leads","setLeads","feedbacks","setFeedbacks","traffic","setTraffic","busy","setBusy","toast","setToast","showToast","msg","reload","data","slugs","statusList","slug","sj","e","filtered","useMemo","q","st","matchesQuery","matchesFilter","kpis","total","active","_a","_b","_c","blocked","inactive","toggleBlock","next","rr","text","loadDrill","email","bj","prev","lj","fj","tj","KpiCard","f","Th","label","React","Td","RowDetails","TableRowSkeleton","title","l","i","SchemaEditor","FeatureControl","TrafficBars","points","max","p","features","setFeatures","loadFeatures","response","define_process_env_default","toggleFeature","featureId","enabled","updatePlan","plan","settings","availableFeatures","vipFeatures","feature","isEnabled","jsonText","setJsonText","load","j","defs","save","parsed","Fragment"],"mappings":"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"}